#include <mach/mt_typedefs.h>

#define TEMPERATURE_T0                  110
#define TEMPERATURE_T1                  0
#define TEMPERATURE_T2                  25
#define TEMPERATURE_T3                  50
#define TEMPERATURE_T                   255 // This should be fixed, never change the value

#define FG_METER_RESISTANCE 	0

#define MAX_BOOTING_TIME_FGCURRENT	1*10 // 10s

#if defined(CONFIG_POWER_EXT)
#define OCV_BOARD_COMPESATE	72 //mV 
#define R_FG_BOARD_BASE		1000
#define R_FG_BOARD_SLOPE	1000 //slope
#else
#define OCV_BOARD_COMPESATE	0 //mV 
#define R_FG_BOARD_BASE		1000
#define R_FG_BOARD_SLOPE	1000 //slope
#endif

#define Q_MAX_POS_50	 2046//2561   
#define Q_MAX_POS_25	 2022		//1978		//1435  //2561 
#define Q_MAX_POS_0	 1863  //2561 
#define Q_MAX_NEG_10	1634 //2561 

#define Q_MAX_POS_50_H_CURRENT	1987  //2534  
#define Q_MAX_POS_25_H_CURRENT	2000		//1940 //2534
#define Q_MAX_POS_0_H_CURRENT	1620  //2534   
#define Q_MAX_NEG_10_H_CURRENT	1313  //2534 

#define R_FG_VALUE 				20 // mOhm, base is 20
#define CURRENT_DETECT_R_FG	100  //10mA

#define OSR_SELECT_7			0

#define CAR_TUNE_VALUE			83

/////////////////////////////////////////////////////////////////////
// <DOD, Battery_Voltage> Table
/////////////////////////////////////////////////////////////////////
typedef struct _BATTERY_PROFILE_STRUC
{
    kal_int32 percentage;
    kal_int32 voltage;
} BATTERY_PROFILE_STRUC, *BATTERY_PROFILE_STRUC_P;

typedef enum
{
    T1_0C,
    T2_25C,
    T3_50C
} PROFILE_TEMPERATURE;

// T0 -10C
BATTERY_PROFILE_STRUC battery_profile_t0[] =
{
	{0  ,  4176}, 
	{2  ,  4161}, 
	{4  ,  4144}, 
	{6  ,  4124}, 
	{7  ,  4103}, 
	{9  ,  4082}, 
	{11 ,  4056}, 
	{13 ,  4015}, 
	{15 ,  3986}, 
	{16 ,  3973}, 
	{18 ,  3963}, 
	{20 ,  3953}, 
	{22 ,  3942}, 
	{24 ,  3932}, 
	{26 ,  3921}, 
	{27 ,  3910}, 
	{29 ,  3899}, 
	{31 ,  3888}, 
	{33 ,  3876}, 
	{35 ,  3864}, 
	{37 ,  3853}, 
	{38 ,  3843}, 
	{40 ,  3833}, 
	{42 ,  3824}, 
	{44 ,  3817}, 
	{46 ,  3811}, 
	{47 ,  3805}, 
	{49 ,  3800}, 
	{51 ,  3796}, 
	{53 ,  3793}, 
	{55 ,  3790}, 
	{57 ,  3789}, 
	{58 ,  3788}, 
	{60 ,  3787}, 
	{62 ,  3786}, 
	{64 ,  3785}, 
	{66 ,  3784}, 
	{68 ,  3782}, 
	{69 ,  3782}, 
	{71 ,  3779}, 
	{73 ,  3777}, 
	{75 ,  3773}, 
	{77 ,  3769}, 
	{79 ,  3763}, 
	{80 ,  3756}, 
	{82 ,  3747}, 
	{84 ,  3736}, 
	{86 ,  3722}, 
	{88 ,  3703}, 
	{89 ,  3681}, 
	{91 ,  3655}, 
	{93 ,  3628}, 
	{94 ,  3619}, 
	{95 ,  3612}, 
	{95 ,  3609}, 
	{96 ,  3594}, 
	{97 ,  3587}, 
	{97 ,  3582}, 
	{98 ,  3578}, 
	{98 ,  3574}, 
	{98 ,  3571}, 
	{98 ,  3568}, 
	{99 ,  3566}, 
	{99 ,  3564}, 
	{99 ,  3563}, 
	{99 ,  3561}, 
	{99 ,  3560}, 
	{100,  3559}, 
	{100,  3557}, 
	{100,  3556}, 
	{100,  3556}, 
	{100,  3554}, 
	{100,  3400}  

   
};      
        
// T1 0C 
BATTERY_PROFILE_STRUC battery_profile_t1[] =
{  
	{0   ,  4181}, 
	{2   ,  4164}, 
	{3   ,  4130}, 
	{5   ,  4077}, 
	{6   ,  4048}, 
	{8   ,  4027}, 
	{10  ,  4010}, 
	{11  ,  3997}, 
	{13  ,  3987}, 
	{14  ,  3978}, 
	{16  ,  3968}, 
	{18  ,  3958}, 
	{19  ,  3948}, 
	{21  ,  3939}, 
	{22  ,  3929}, 
	{24  ,  3920}, 
	{26  ,  3912}, 
	{27  ,  3903}, 
	{29  ,  3894}, 
	{30  ,  3885}, 
	{32  ,  3876}, 
	{34  ,  3867}, 
	{35  ,  3856}, 
	{37  ,  3845}, 
	{38  ,  3834}, 
	{40  ,  3824}, 
	{42  ,  3815}, 
	{43  ,  3808}, 
	{45  ,  3802}, 
	{46  ,  3797}, 
	{48  ,  3794}, 
	{50  ,  3791}, 
	{51  ,  3789}, 
	{53  ,  3788}, 
	{54  ,  3788}, 
	{56  ,  3787}, 
	{58  ,  3786}, 
	{59  ,  3785}, 
	{61  ,  3785}, 
	{62  ,  3784}, 
	{64  ,  3783}, 
	{66  ,  3782}, 
	{67  ,  3780}, 
	{69  ,  3779}, 
	{70  ,  3776}, 
	{72  ,  3773}, 
	{74  ,  3768}, 
	{75  ,  3761}, 
	{77  ,  3751}, 
	{78  ,  3739}, 
	{80  ,  3722}, 
	{82  ,  3700}, 
	{83  ,  3674}, 
	{85  ,  3647}, 
	{87  ,  3622}, 
	{88  ,  3599}, 
	{90  ,  3577}, 
	{91  ,  3556}, 
	{93  ,  3537}, 
	{95  ,  3523}, 
	{96  ,  3510}, 
	{97  ,  3498}, 
	{98  ,  3493}, 
	{98  ,  3489}, 
	{99  ,  3486}, 
	{99  ,  3482}, 
	{99  ,  3480}, 
	{99  ,  3478}, 
	{100 ,  3475}, 
	{100 ,  3472}, 
	{100 ,  3470}, 
	{100 ,  3468}, 
	{100 ,  3335}  
}; 
// T2 25C
BATTERY_PROFILE_STRUC battery_profile_t2[] =
{
	{0  ,   4185},  
	{2  ,   4165},  
	{3  ,   4147},  
	{5  ,   4132},  
	{6  ,   4116},  
	{8  ,   4100},  
	{9  ,   4085},  
	{11 ,   4073},  
	{12 ,   4060},  
	{14 ,   4044},  
	{15 ,   4029},  
	{17 ,   4014},  
	{18 ,   4002},  
	{20 ,   3991},  
	{21 ,   3980},  
	{23 ,   3970},  
	{24 ,   3959},  
	{26 ,   3949},  
	{27 ,   3939},  
	{29 ,   3929},  
	{30 ,   3920},  
	{32 ,   3911},  
	{33 ,   3902},  
	{35 ,   3894},  
	{36 ,   3886},  
	{38 ,   3878},  
	{39 ,   3870},  
	{41 ,   3862},  
	{42 ,   3852},  
	{44 ,   3838},  
	{45 ,   3824},  
	{47 ,   3813},  
	{48 ,   3803},  
	{50 ,   3797},  
	{51 ,   3792},  
	{53 ,   3788},  
	{54 ,   3785},  
	{56 ,   3782},  
	{57 ,   3780},  
	{59 ,   3779},  
	{60 ,   3778},  
	{62 ,   3777},  
	{63 ,   3776},  
	{65 ,   3775},  
	{66 ,   3774},  
	{68 ,   3773},  
	{69 ,   3772},  
	{71 ,   3771},  
	{72 ,   3770},  
	{74 ,   3769},  
	{75 ,   3768},  
	{77 ,   3763},  
	{78 ,   3756},  
	{80 ,   3745},  
	{81 ,   3733},  
	{83 ,   3718},  
	{84 ,   3699},  
	{86 ,   3672},  
	{88 ,   3642},  
	{89 ,   3610},  
	{91 ,   3586},  
	{92 ,   3568},  
	{94 ,   3553},  
	{95 ,   3539},  
	{97 ,   3524},  
	{98 ,   3496},  
	{100,   3428},  
	{100,   3319},  
	{100,   3298},  
	{100,   3287},  
	{100,   3280},  
	{100,   3277},  
	{100,   3242}   
}; 

// T3 50C
BATTERY_PROFILE_STRUC battery_profile_t3[] =
{
	{0   ,   4182},   
	{1   ,   4158},   
	{3   ,   4139},   
	{4   ,   4123},   
	{6   ,   4106},   
	{7   ,   4091},   
	{9   ,   4077},   
	{10  ,   4063},   
	{12  ,   4049},   
	{13  ,   4035},   
	{15  ,   4023},   
	{16  ,   4010},   
	{17  ,   3998},   
	{19  ,   3987},   
	{20  ,   3975},   
	{22  ,   3964},   
	{23  ,   3953},   
	{25  ,   3942},   
	{26  ,   3932},   
	{28  ,   3923},   
	{29  ,   3913},   
	{31  ,   3904},   
	{32  ,   3896},   
	{34  ,   3887},   
	{35  ,   3879},   
	{36  ,   3872},   
	{38  ,   3865},   
	{39  ,   3857},   
	{41  ,   3849},   
	{42  ,   3841},   
	{44  ,   3830},   
	{45  ,   3815},   
	{47  ,   3804},   
	{48  ,   3796},   
	{50  ,   3791},   
	{51  ,   3786},   
	{52  ,   3782},   
	{54  ,   3779},   
	{55  ,   3777},   
	{57  ,   3775},   
	{58  ,   3774},   
	{60  ,   3773},   
	{61  ,   3772},   
	{63  ,   3771},   
	{64  ,   3770},   
	{66  ,   3769},   
	{67  ,   3768},   
	{69  ,   3767},   
	{70  ,   3766},   
	{71  ,   3765},   
	{73  ,   3761},   
	{74  ,   3751},   
	{76  ,   3741},   
	{77  ,   3732},   
	{79  ,   3723},   
	{80  ,   3712},   
	{82  ,   3698},   
	{83  ,   3681},   
	{85  ,   3659},   
	{86  ,   3635},   
	{88  ,   3610},   
	{89  ,   3589},   
	{90  ,   3568},   
	{92  ,   3547},   
	{93  ,   3535},   
	{95  ,   3523},   
	{96  ,   3510},   
	{98  ,   3494},   
	{99  ,   3452},   
	{100 ,   3376},   
	{100 ,   3311},   
	{100 ,   3298},   
	{100 ,   3235}    
};              

// battery profile for actual temperature. The size should be the same as T1, T2 and T3
BATTERY_PROFILE_STRUC battery_profile_temperature[] =
{
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},   
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},   
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},   
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},   
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},   
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},   
    {0, 0},
    {0, 0},
    {0, 0},   
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},   
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},   
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0}  
};    

/////////////////////////////////////////////////////////////////////
// <Rbat, Battery_Voltage> Table
/////////////////////////////////////////////////////////////////////
typedef struct _R_PROFILE_STRUC
{
    kal_int32 resistance; // Ohm
    kal_int32 voltage;
} R_PROFILE_STRUC, *R_PROFILE_STRUC_P;


R_PROFILE_STRUC r_profile_t0[] =                                      
{                                                                     
 	{285 ,    4176 },
	{540 ,    4161 },
	{508 ,    4144 },
	{513 ,    4124 },
	{515 ,    4103 },
	{515 ,    4082 },
	{528 ,    4056 },
	{613 ,    4015 },
	{730 ,    3986 },
	{750 ,    3973 },
	{758 ,    3963 },
	{760 ,    3953 },
	{765 ,    3942 },
	{768 ,    3932 },
	{770 ,    3921 },
	{770 ,    3910 },
	{768 ,    3899 },
	{790 ,    3888 },
	{785 ,    3876 },
	{770 ,    3864 },
	{768 ,    3853 },
	{770 ,    3843 },
	{760 ,    3833 },
	{768 ,    3824 },
	{770 ,    3817 },
	{778 ,    3811 },
	{778 ,    3805 },
	{783 ,    3800 },
	{773 ,    3796 },
	{773 ,    3793 },
	{773 ,    3790 },
	{775 ,    3789 },
	{785 ,    3788 },
	{795 ,    3787 },
	{795 ,    3786 },
	{793 ,    3785 },
	{800 ,    3784 },
	{800 ,    3782 },
	{808 ,    3782 },
	{810 ,    3779 },
	{823 ,    3777 },
	{833 ,    3773 },
	{848 ,    3769 },
	{865 ,    3763 },
	{890 ,    3756 },
	{913 ,    3747 },
	{955 ,    3736 },
	{980 ,    3722 },
	{1013,    3703 },
	{1025,    3681 },
	{1038,    3655 },
	{1065,    3628 },
	{1048,    3619 },
	{1030,    3612 },
	{1025,    3609 },
	{985 ,    3594 },
	{968 ,    3587 },
	{955 ,    3582 },
	{945 ,    3578 },
	{935 ,    3574 },
	{930 ,    3571 },
	{923 ,    3568 },
	{918 ,    3566 },
	{913 ,    3564 },
	{908 ,    3563 },
	{905 ,    3561 },
	{900 ,    3560 },
	{900 ,    3559 },
	{895 ,    3557 },
	{893 ,    3556 },
	{895 ,    3556 },
	{888 ,    3554 },
	{503 ,    3400 }                                                                   
};                                                                    
                                                                      
// T1 0C                                                              
R_PROFILE_STRUC r_profile_t1[] =                                      
{                                                                     
	{213 ,     4181 }, 
	{223 ,     4164 }, 
	{213 ,     4130 }, 
	{315 ,     4077 }, 
	{375 ,     4048 }, 
	{383 ,     4027 }, 
	{390 ,     4010 }, 
	{390 ,     3997 }, 
	{400 ,     3987 }, 
	{410 ,     3978 }, 
	{413 ,     3968 }, 
	{423 ,     3958 }, 
	{415 ,     3948 }, 
	{423 ,     3939 }, 
	{425 ,     3929 }, 
	{425 ,     3920 }, 
	{433 ,     3912 }, 
	{438 ,     3903 }, 
	{438 ,     3894 }, 
	{438 ,     3885 }, 
	{433 ,     3876 }, 
	{433 ,     3867 }, 
	{425 ,     3856 }, 
	{415 ,     3845 }, 
	{408 ,     3834 }, 
	{400 ,     3824 }, 
	{393 ,     3815 }, 
	{390 ,     3808 }, 
	{390 ,     3802 }, 
	{388 ,     3797 }, 
	{395 ,     3794 }, 
	{393 ,     3791 }, 
	{395 ,     3789 }, 
	{398 ,     3788 }, 
	{405 ,     3788 }, 
	{405 ,     3787 }, 
	{410 ,     3786 }, 
	{413 ,     3785 }, 
	{418 ,     3785 }, 
	{423 ,     3784 }, 
	{425 ,     3783 }, 
	{433 ,     3782 }, 
	{433 ,     3780 }, 
	{440 ,     3779 }, 
	{448 ,     3776 }, 
	{455 ,     3773 }, 
	{468 ,     3768 }, 
	{485 ,     3761 }, 
	{505 ,     3751 }, 
	{535 ,     3739 }, 
	{548 ,     3722 }, 
	{550 ,     3700 }, 
	{548 ,     3674 }, 
	{543 ,     3647 }, 
	{540 ,     3622 }, 
	{543 ,     3599 }, 
	{548 ,     3577 }, 
	{558 ,     3556 }, 
	{575 ,     3537 }, 
	{613 ,     3523 }, 
	{675 ,     3510 }, 
	{748 ,     3498 }, 
	{733 ,     3493 }, 
	{725 ,     3489 }, 
	{715 ,     3486 }, 
	{708 ,     3482 }, 
	{703 ,     3480 }, 
	{695 ,     3478 }, 
	{690 ,     3475 }, 
	{683 ,     3472 }, 
	{680 ,     3470 }, 
	{673 ,     3468 }, 
	{343 ,     3335 }                                                 
};                                                                    
                                                                      
// T2 25C                                                             
R_PROFILE_STRUC r_profile_t2[] =                                      
{    
	{163  ,   4185 },
	{163  ,   4165 },
	{160  ,   4147 },
	{165  ,   4132 },
	{168  ,   4116 },
	{165  ,   4100 },
	{165  ,   4085 },
	{168  ,   4073 },
	{173  ,   4060 },
	{173  ,   4044 },
	{175  ,   4029 },
	{175  ,   4014 },
	{178  ,   4002 },
	{180  ,   3991 },
	{185  ,   3980 },
	{188  ,   3970 },
	{190  ,   3959 },
	{193  ,   3949 },
	{198  ,   3939 },
	{200  ,   3929 },
	{203  ,   3920 },
	{208  ,   3911 },
	{210  ,   3902 },
	{215  ,   3894 },
	{220  ,   3886 },
	{223  ,   3878 },
	{223  ,   3870 },
	{223  ,   3862 },
	{220  ,   3852 },
	{203  ,   3838 },
	{185  ,   3824 },
	{175  ,   3813 },
	{165  ,   3803 },
	{163  ,   3797 },
	{163  ,   3792 },
	{163  ,   3788 },
	{165  ,   3785 },
	{165  ,   3782 },
	{165  ,   3780 },
	{165  ,   3779 },
	{168  ,   3778 },
	{168  ,   3777 },
	{168  ,   3776 },
	{168  ,   3775 },
	{170  ,   3774 },
	{173  ,   3773 },
	{173  ,   3772 },
	{175  ,   3771 },
	{178  ,   3770 },
	{180  ,   3769 },
	{188  ,   3768 },
	{185  ,   3763 },
	{185  ,   3756 },
	{183  ,   3745 },
	{185  ,   3733 },
	{193  ,   3718 },
	{200  ,   3699 },
	{203  ,   3672 },
	{205  ,   3642 },
	{198  ,   3610 },
	{195  ,   3586 },
	{198  ,   3568 },
	{200  ,   3553 },
	{208  ,   3539 },
	{225  ,   3524 },
	{238  ,   3496 },
	{240  ,   3428 },
	{280  ,   3319 },
	{245  ,   3298 },
	{220  ,   3287 },
	{203  ,   3280 },
	{195  ,   3277 },
	{110  ,   3242 }                                                                    
};                                                                    
                                                                      
// T3 50C                                                             
R_PROFILE_STRUC r_profile_t3[] =                                      
{                                                                     
	{165 ,   4182}, 
	{165 ,   4158}, 
	{168 ,   4139}, 
	{170 ,   4123}, 
	{168 ,   4106}, 
	{173 ,   4091}, 
	{175 ,   4077}, 
	{173 ,   4063}, 
	{175 ,   4049}, 
	{173 ,   4035}, 
	{178 ,   4023}, 
	{178 ,   4010}, 
	{180 ,   3998}, 
	{183 ,   3987}, 
	{180 ,   3975}, 
	{180 ,   3964}, 
	{183 ,   3953}, 
	{183 ,   3942}, 
	{183 ,   3932}, 
	{188 ,   3923}, 
	{188 ,   3913}, 
	{193 ,   3904}, 
	{200 ,   3896}, 
	{203 ,   3887}, 
	{205 ,   3879}, 
	{213 ,   3872}, 
	{218 ,   3865}, 
	{220 ,   3857}, 
	{220 ,   3849}, 
	{233 ,   3841}, 
	{220 ,   3830}, 
	{200 ,   3815}, 
	{190 ,   3804}, 
	{185 ,   3796}, 
	{185 ,   3791}, 
	{183 ,   3786}, 
	{185 ,   3782}, 
	{188 ,   3779}, 
	{190 ,   3777}, 
	{188 ,   3775}, 
	{190 ,   3774}, 
	{193 ,   3773}, 
	{193 ,   3772}, 
	{195 ,   3771}, 
	{198 ,   3770}, 
	{200 ,   3769}, 
	{203 ,   3768}, 
	{205 ,   3767}, 
	{205 ,   3766}, 
	{210 ,   3765}, 
	{215 ,   3761}, 
	{203 ,   3751}, 
	{210 ,   3741}, 
	{208 ,   3732}, 
	{213 ,   3723}, 
	{215 ,   3712}, 
	{233 ,   3698}, 
	{250 ,   3681}, 
	{258 ,   3659}, 
	{253 ,   3635}, 
	{248 ,   3610}, 
	{248 ,   3589}, 
	{245 ,   3568}, 
	{238 ,   3547}, 
	{248 ,   3535}, 
	{245 ,   3523}, 
	{250 ,   3510}, 
	{255 ,   3494}, 
	{248 ,   3452}, 
	{265 ,   3376}, 
	{278 ,   3311}, 
	{248 ,   3298}, 
	{90  ,   3235}  
                                                      
                                                                      
};                                                                    

// r-table profile for actual temperature. The size should be the same as T1, T2 and T3
R_PROFILE_STRUC r_profile_temperature[] =
{
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},   
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},   
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},   
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},   
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},   
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},   
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},   
    {0, 0},
    {0, 0},
    {0, 0},   
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},   
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},   
    {0, 0},
    {0, 0}   
};    


int fgauge_get_saddles(void);
BATTERY_PROFILE_STRUC_P fgauge_get_profile(kal_uint32 temperature);

int fgauge_get_saddles_r_table(void);
R_PROFILE_STRUC_P fgauge_get_profile_r_table(kal_uint32 temperature);

//#define CONFIG_POWER_VERIFY
